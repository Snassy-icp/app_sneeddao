# SNS Jailbreak Wizard - Implementation Plan

## Overview

The SNS Jailbreak tool helps users move SNS neurons out of the NNS by generating customized JavaScript that adds their Sneed Wallet PID as a full controller to their SNS neurons.

## How It Works

1. User logs into NNS app (nns.ic0.app)
2. User runs a generated JavaScript in browser console
3. The script adds the specified principal as a full controller to the neuron
4. The neuron can now be managed from both NNS and Sneed Hub

## Technical Details

### Script Components

**Base Script** (`resources/sns_jailbreak/base_script.js`)
- Large reusable library providing SNS governance interaction
- Loaded from raw GitHub URL: `https://raw.githubusercontent.com/Snassy-icp/app_sneeddao/main/resources/sns_jailbreak/base_script.js`

**Custom Script** (generated by wizard)
```javascript
// Load the base script
const baseScript = document.createElement('script');
baseScript.src = 'https://raw.githubusercontent.com/Snassy-icp/app_sneeddao/main/resources/sns_jailbreak/base_script.js';
document.head.appendChild(baseScript);

// Wait for script to load, then execute
baseScript.onload = async () => {
    await yolosns.addControllerToNeuron(
        "SNS_GOVERNANCE_CANISTER_ID",  // SNS governance canister ID
        "NEURON_ID_HEX",               // Neuron ID as hex string
        "PRINCIPAL_TO_ADD"             // Principal to add as controller
    );
    console.log("âœ… Controller added successfully!");
};
```

## Wizard Steps

### Step 1: Select SNS
- Dropdown of all available SNS DAOs
- Display SNS logo and name
- Pre-select if URL parameter provided

### Step 2: Select Neuron
- Load user's hotkeyed neurons for the selected SNS
- Display with names/nicknames using existing naming system
- Show neuron stake and dissolve state
- Option to manually enter any neuron ID (for neurons not hotkeyed)
- Link to view neuron on /neuron page

### Step 3: Select Principal
- Pre-select user's logged-in principal
- Option to enter custom principal
- Principal validation

### Step 4: Generate Script
- Combine base + custom script
- Display script in code box with copy button
- Clear step-by-step instructions:
  1. Open NNS app (nns.ic0.app) in a new tab
  2. Log in with the same identity that controls the neuron
  3. Open browser console (Ctrl+Shift+J / Cmd+Option+J)
  4. Paste the script and press Enter
  5. Wait for confirmation message
- Safety warnings about running scripts

### Step 5: Confirmation
- Link to /neuron page to verify controller was added
- Button to add another neuron
- Explanation of what they can do now (transfer, trade on Sneedex, etc.)

## UI/UX Requirements

- Follow wizard styling from LockWizard.jsx and SneedexCreate.jsx
- Sleek step progress indicator
- Theme-aware (dark/light mode support)
- Responsive design
- Only for logged-in users
- Card-based step navigation

## Implementation Tasks

1. **Create SnsJailbreak.jsx page** in `src/app_sneeddao_frontend/src/pages/`
   - Wizard component with 5 steps
   - SNS selection with logo loading
   - Neuron selection with naming support
   - Principal input with validation
   - Script generation and copy functionality
   - Instructions display

2. **Update App.jsx**
   - Add route: `/tools/sns_jailbreak`

3. **Update Header.jsx**
   - Make Tools menu visible to ALL authenticated users (not just admins)
   - Add "SNS Jailbreak" item to Tools submenu

4. **Update ToolsMain.jsx**
   - Add SNS Jailbreak tool card with description and link

## Files to Create/Modify

### Create:
- `src/app_sneeddao_frontend/src/pages/SnsJailbreak.jsx`

### Modify:
- `src/app_sneeddao_frontend/src/App.jsx` (add route)
- `src/app_sneeddao_frontend/src/components/Header.jsx` (update Tools menu visibility)
- `src/app_sneeddao_frontend/src/pages/ToolsMain.jsx` (add tool card)

## Security Considerations

- Clear warnings about running scripts in browser console
- Explanation that this only ADDS a controller, doesn't remove existing ones
- Link to GitHub source for script verification
